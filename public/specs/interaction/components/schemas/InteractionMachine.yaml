type: object
description: | 
  An interaction machine object encapsulates the complete set of objects that define an interaction ->
  Triggers, Outcomes, Schema, and metadata.
properties:
  name:
    description: A human readable label for the intraction to be used in interfaces.
    type: string
    examples:
      - sigh-up
      - order-checkout
  class:
    description: Describes the nature of an intreaction content based on the current representation.
    type: array
    items:
      type: string
      examples:
        - screen-set
        - checkout-api
        - subscribtion-collection-form
        - lite-sign-up

    
  input:
    description: A set of key-value pairs that describe the input of an intraction.
    type: object
    properties:
      identity:
        type: object
        $ref: .\IdentityTemplate.yaml

      profile:
        $ref: ..\..\..\shared\schemas\ProfileTemplate.yaml
            
      data:
        $ref: ..\..\..\shared\schemas\DataTemplate.yaml 
      
      subscribtions:
        $ref: ..\..\..\shared\schemas\SubscriptionsTemplate.yaml
        
      consents:
        $ref: ..\..\..\shared\schemas\ConsentsTemplate.yaml
        
      interaction:
        title: Interaction Fields
        description: Interaction scoped fields.
        type: object
        allOf:
          - $ref: ..\..\..\shared\schemas\CustomTemplate.yaml


  outcomes:
    type: object
    description: A set of key-value pairs that describe the possible outcomes of the intraction.
    properties:

      require_auth:
        type: object
        properties:
          output:
            type: object
            properties:
              type:
                type: string
                readOnly: true
                default: auth
              identity:
                type: string
                readOnly: true 
                default:  "#/properties/identity"


      authorized:
        type: object
        properties:
          output:
            type: object
            readOnly: true
            properties:
              type:
                type: string
                readOnly: true
                default: projection
              identity:
                type: string
                readOnly: true
                default: "#/properties/identity"   
              profile:
                type: string
                readOnly: true
                default: "#/properties/profile"
              subscriptions:
                type: string
                readOnly: true
                default: "#/properties/subscriptions"
              consents:
                type: string
                readOnly: true
                default: "#/properties/consents"  