type: object
discriminator:
  propertyName: channel
  mapping:
    email: .\EmailSchema.yaml
    sms: .\SmsSchema.yaml
  properties:
    channel:
      eunm: ['email' ,'sms']
      default: 'email'  
allOf:
#  - properties:
#      channel:
#        type: string
  - oneOf:
      - allOf:
          - title: email
            properties:
              channel:
                const: 'email'
                default: 'email'
          - $ref: .\EmailSchema.yaml
      - allOf:
          - title: sms
            properties:
              channel:
                const: 'sms'
                default: 'sms'
          - $ref: .\SmsSchema.yaml
x-examples:
  email-channel:
    channel: email
    identity:
      email: a@mail.com
    newsletter: true
    deals: true
  phone-channel:
    channel: phone
    identity:
      phonenumber: '056999999'
    newsletter: true
