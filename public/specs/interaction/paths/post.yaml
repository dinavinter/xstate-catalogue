post:
  summary: Post interaction details.
  operationId: PostInteractionDetails
  description: Post interaction details.
  requestBody:
    content:
      application/json:
        schema:
          $ref: ..\components\schemas\SignUpSchema.yaml
        examples:
          email-channel:
            value:
              channel: email
              identity:
                email: email@mail.com
                lookup_token: aToken
              newsletter: true
              deals: true
          phone-channel:
            value:
              channel: sms
              identity:
                phonenumber: 543332123
                lookup_token: aToken               
              newsletter: true
  responses:
    '201':
      description: Customer intention submitted successfully.
      content:
        application/json:
          schema:
            $ref: ..\components\schemas\form.yaml
          examples:
            signup-interaction-ok:
              summary: Customer intent submitted successfully.
              value:
                properties:
                  template: signup
                  status: verified
                  interactionId: 7800232
    '206':
      description: Interactions submitted but requires account binding.
      content:
        application/json:
          schema:
            $ref: ..\components\schemas\form.yaml
          examples:
            signup-interaction-pending-bind:
              summary: Customer intent submitted successfully.
              value:
                properties:
                  template: signup
                  status: intention
                  interactionId: 7800232
                  links:
                    - rel: bind
                      href: /intractions/v1/{interaction}/{interactionId}/bind/
                      type: application/json
                      method: POST    
                    - rel: lookup
                      description: The target URL is a token for identifier lookup
                      type: application/json
                      href: /auth/lookup/{channel}/token
                      method: post  
      links:
        GetInteraction:
          operationId: GetInteraction
          parameters:
            interactionId: $response.body#/interactionId
          description: Get Interaction State.
        BindInteraction:
          operationId: BindInteraction
          parameters:
            interactionId: $response.body#/interactionId
          description: Bind interaction to account.  
        Lookup:
          operationId: LookupInteraction
          parameters:
            channel: $request.body#/channel
          description: Lookup account by identifier.

    '207':
      description: Interactions submitted but requires authentication.
      content:
        application/json:
          schema:
            allOf:
              - $ref: ..\components\schemas\Interaction.yaml
              - $ref: ..\..\shared\errors\basic-error.yaml
              - $ref: ..\components\schemas\form.yaml
          examples:
            signup-interaction-401:
              summary: Represents a signup to a newsletter pending to authentication.
              value:
                properties:
                  interactionId: #0023232
                  message*:  Authentication Required  
                  callId: #dsdfafsdsa
                  code*: 401
                  template: signup
                  status: intent
                links:
                  - rel: self
                    href: /{interactionId}
                    type: application/json
                    method: GET
                  - rel: bind
                    href: /{interactionId}/bind/
                    type: application/json
                    method: POST
      links:
        BindInteraction:
          operationId: BindInteraction
          parameters:
            interactionId: $response.body#/interactionId
          description: Get interaction state.
    '400':
      $ref: ..\..\shared\errors\bad_request.yaml
    '403':
      $ref: ..\..\shared\errors\forbidden.yaml
    '503':
      $ref: ..\..\shared\errors\service_unavailable.yaml
