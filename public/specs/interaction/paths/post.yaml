post:
  summary: Post interaction details.
  operationId: PostInteractionDetails
  description: Post interaction details.
  parameters:
    - in: path
      name: template
      required: true
      description: Specifies the interaction template.
    
  requestBody:
    content:
      application/json:
        schema:
          description: input should be of the specified template schema
          $ref: ..\components\schemas\InputSchema.yaml
        examples:
          email-channel:
            value:
              channel: email
              identity:
                email: email@mail.com
              subscribtions:                
                newsletter: true
                deals: true
              profile:
                firstName: jakob
          phone-channel:
            value:
              channel: sms
              identity:
                phonenumber: 543332123
              subscribtions:
                newsletter: true
              profile:
                firstName: jakob  
  responses:
    '201':
      description: Customer intention submitted successfully.
      content:
        application/json:
          schema:
            $ref: ..\components\schemas\form.yaml
          examples:
            signup-interaction-ok:
              summary: Customer intent submitted successfully.
              value:
                properties:
                  template: signup
                  status: authorized
                  interactionId: 7800232
      links:
        GetInteraction:
          operationId: GetInteraction
          parameters:
            interactionId: $response.body#/interactionId
          description: Get Interaction State. 
  

    '401':
      description: Authentication Required.
      content:
        application/json:
          schema:
            allOf:
              - $ref: ..\..\shared\errors\basic-error.yaml
              - $ref: ..\components\schemas\form.yaml
              - properties:
                  identity: 
                    $ref: $request.body#/identity
                  state:
                    const: require_auth
          examples:
            signup-interaction-401:
              summary: Represents a signup to a newsletter pending to authentication.
              value:
                properties:
                  interactionId: 0023232
                  message*:  Authentication Required  
                  callId: dsdfafsdsa
                  code*: 401
                  template: signup
                  status: require_auth
                  identity:
                    phonenumber: 543332123 
                

      links:
        GetInteraction:
          operationId: GetInteraction
          parameters:
            interactionId: $response.body#/interactionId
          description: Get Interaction State.
        BindInteraction:
          operationId: BindInteraction
          parameters:
            interactionId: $response.body#/interactionId
          description: Bind interaction to account.
        Lookup:
          operationId: LookupInteraction
          parameters:
            channel: $request.body#/channel
            identity: $request.body#/identity
          description: Lookup account by identifier.
    '400':
      $ref: ..\..\shared\errors\bad_request.yaml
    '403':
      $ref: ..\..\shared\errors\forbidden.yaml
    '503':
      $ref: ..\..\shared\errors\service_unavailable.yaml
